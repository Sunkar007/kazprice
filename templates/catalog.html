{% extends 'base.html' %}

{% block title %}Каталог — KazPrice{% endblock %}

{% block content %}
  <div class="row">
    <aside class="col-12 col-md-3 mb-3">
      <div class="card p-3">
        <h5 style="color:var(--accent)">Санаттар</h5>
        <ul class="list-unstyled">
          <li><a href="#">Смартфондар</a></li>
          <li><a href="#">Ноутбуктар</a></li>
          <li><a href="#">Теледидарлар</a></li>
          <li><a href="#">Кесінділер</a></li>
        </ul>
      </div>
    </aside>

    <section class="col-12 col-md-9">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
          <strong>Табылған: {{ total if total is defined else '—' }}</strong>
        </div>
        <div class="d-flex gap-2 align-items-center">
          <label class="mb-0">Сұрыптау:</label>
          <select class="form-select form-select-sm ms-2" style="width:auto">
            <option value="popular">Танымалдылығы бойынша</option>
            <option value="price_asc">Баға↑</option>
            <option value="price_desc">Баға↓</option>
          </select>
        </div>
      </div>

      <div class="row g-3">
        {% for p in products %}
        <div class="col-6 col-md-4 col-lg-3">
          <div class="card product-card h-100">
            <img src="{{ url_for('static', filename='img/' ~ (p.get('image_url','logo.jpg').split('/')[-1])) }}" class="card-img-top" alt="{{ p.get('name') }}">
            <div class="card-body d-flex flex-column">
              <h6 class="card-title">{{ p.get('name') }}</h6>
              <p class="mb-2 text-muted small">{{ p.get('store_name','') }}</p>
              <div class="mt-auto d-flex justify-content-between align-items-center">
                <span class="fw-bold">{{ '{:,.0f}'.format(p.get('price',0)) }} ₸</span>
                <div>
                  <button class="btn btn-sm btn-outline-secondary">♡</button>
                  <button class="btn btn-sm btn-primary">Себетке</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Pagination placeholder -->
      <nav class="mt-4">
        <ul class="pagination">
          <li class="page-item disabled"><a class="page-link">«</a></li>
          <li class="page-item active"><a class="page-link">1</a></li>
          <li class="page-item"><a class="page-link">2</a></li>
          <li class="page-item"><a class="page-link">»</a></li>
        </ul>
      </nav>
    </section>
  </div>
{% endblock %}
